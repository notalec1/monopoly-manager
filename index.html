<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monopoly Cloud 3.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- AUTH OVERLAY -->
    <div id="authOverlay" class="auth-overlay">
        <div class="auth-card">
            <div class="brand" style="justify-content:center; margin-bottom:20px; font-size:1.8rem;">
                <i class="fa-solid fa-city"></i> MonoManager
            </div>

            <!-- Error Message -->
            <div id="authError" class="auth-error" style="display:none;"></div>

            <!-- Email/Pass Form -->
            <form id="emailForm" onsubmit="handleEmailAuth(event)">
                <input type="email" id="emailInput" placeholder="Email Address" required style="margin-bottom:10px;">
                <input type="password" id="passInput" placeholder="Password" required style="margin-bottom:10px;">
                
                <button type="submit" class="btn-primary" id="authBtnLabel">Sign In</button>
            </form>

            <div style="display:flex; justify-content:space-between; margin-top:10px; font-size:0.8rem;">
                <a href="#" onclick="toggleAuthMode()" id="toggleAuthText" style="color:var(--primary); text-decoration:none;">Need an account? Register</a>
                <a href="#" onclick="handlePasswordReset()" style="color:var(--text-muted); text-decoration:none;">Forgot Password?</a>
            </div>

            <div class="divider">OR</div>

            <!-- Social / Anon -->
            <button class="btn-google" onclick="signInGoogle()">
                <i class="fa-brands fa-google"></i> Sign in with Google
            </button>
            
            <button class="btn-anon" onclick="signInAnon()">
                <i class="fa-solid fa-user-secret"></i> Play Anonymously
            </button>
        </div>
    </div>

    <!-- MAIN APP WRAPPER -->
    <div class="app-wrapper">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="brand">
                <i class="fa-solid fa-city"></i> MonoManager <span style="font-size:0.5em; opacity:0.5">v3.0</span>
            </div>

            <!-- Game Timer -->
            <div class="timer-card">
                <i class="fa-regular fa-clock"></i> <span id="gameTimer">00:00:00</span>
            </div>

            <div class="sidebar-content">
                
                <div class="sidebar-content">
                
                <!-- Free Parking Pot -->
                <div class="pot-card">
                    <div style="font-size:0.8rem; text-transform:uppercase; opacity:0.8;">Free Parking Pot</div>
                    <div id="potAmount" class="pot-amount">$0</div>
                    
                    <!-- ADDED CLASS: banker-only -->
                    <div class="pot-controls banker-only">
                        <button class="btn-pot" onclick="addToPot(50)">+$50</button>
                        <button class="btn-pot" onclick="addToPot(100)">+$100</button>
                    </div>
                    
                    <!-- ADDED CLASS: banker-only -->
                    <div class="claim-row banker-only">
                        <select id="potWinner" class="claim-select">
                            <option value="">Select Winner...</option>
                        </select>
                        <button class="btn-claim" onclick="claimPot()">CLAIM</button>
                    </div>
                </div>

                <!-- Add Player -->
                <!-- ADDED CLASS: banker-only -->
                <div class="input-group banker-only" style="display:flex; gap:5px;">
                    <input type="text" id="newPlayerName" placeholder="New Player Name...">
                    <button class="btn-icon" onclick="addPlayer()">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                </div>

                <!-- Dice -->
                <div class="dice-card">
                    <div class="dice-result" id="diceResult">--</div>
                    <!-- ADDED CLASS: banker-only -->
                    <button class="btn-primary banker-only" onclick="rollDice()">ROLL DICE</button>
                </div>

                <!-- Logs ... -->

                <!-- Logs -->
                <div class="log-container">
                    <ul id="logList"></ul>
                </div>
            </div>

            
        <div style="margin-top:auto; display:flex; flex-direction:column; gap:10px;">
                <!-- Banker Info Display -->
                <div style="font-size:0.8rem; color:var(--text-muted); text-align:center;">
                    Banker: <span id="bankerNameDisplay" style="color:var(--warning)">--</span>
                </div>

                <button class="btn-tiny" onclick="logout()" style="background:#334155; width:100%; padding:10px; font-size:0.9rem;">
                    <i class="fa-solid fa-right-from-bracket"></i> Sign Out
                </button>

                <!-- NUKE BUTTON (Wrapped in container) -->
                <div id="nukeBtnContainer">
                    <button class="btn-danger" onclick="resetGame()">
                        <i class="fa-solid fa-bomb"></i> Nuke Game
                    </button>
                </div>
            </div>

        </nav>        

        <!-- Main Dashboard -->
        <main class="main-content">
            <div id="playersGrid" class="grid-container"></div>
        </main>
    </div>

    <script type="module" src="script.js"></script>
</body>
</html>
